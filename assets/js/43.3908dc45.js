(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{550:function(t,s,a){"use strict";a.r(s);var v=a(14),_=Object(v.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"操作场景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#操作场景"}},[t._v("#")]),t._v(" 操作场景")]),t._v(" "),a("p",[t._v("本文档主要介绍如何在控制台中创建数据库集合、向集合上插入数据、以及查看插入的数据。")]),t._v(" "),a("h2",{attrs:{id:"操作步骤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#操作步骤"}},[t._v("#")]),t._v(" 操作步骤")]),t._v(" "),a("h3",{attrs:{id:"创建第一个集合"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建第一个集合"}},[t._v("#")]),t._v(" 创建第一个集合")]),t._v(" "),a("ol",[a("li",[t._v('打开控制台，选择 "数据库" 标签页，通过 "添加集合" 入口创建一个集合。')]),t._v(" "),a("li",[t._v("假设我们要创建一个待办事项小程序，我们创建一个名为 todos 的集合。")]),t._v(" "),a("li",[t._v("创建成功后，您可以看到 todos 集合管理界面，您可以在界面中添加记录、查找记录、管理索引和管理权限。")])]),t._v(" "),a("h4",{attrs:{id:"小程序云开发控制台"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#小程序云开发控制台"}},[t._v("#")]),t._v(" 小程序云开发控制台")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://main.qcloudimg.com/raw/ae66806ceba2d2c8fc0cc3448b3779c5.png",alt:"小程序云开发控制台界面"}})]),t._v(" "),a("h4",{attrs:{id:"腾讯云云开发控制台"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#腾讯云云开发控制台"}},[t._v("#")]),t._v(" 腾讯云云开发控制台")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://main.qcloudimg.com/raw/5a7ef6d005b935fa346e2e13d47e3915.png",alt:"管理数据库"}})]),t._v(" "),a("h3",{attrs:{id:"创建第一条记录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建第一条记录"}},[t._v("#")]),t._v(" 创建第一条记录")]),t._v(" "),a("ol",[a("li",[t._v("控制台提供了可视化添加数据的交互界面，单击【添加记录】，添加我们的第一条待办事项。示例代码如下：")])]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 描述，String 类型")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"description"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"learn mini-program cloud service"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 截止时间，Date 类型")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"due"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Date("),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2018-09-01"')]),t._v(")"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 标签，Array 类型")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"tags"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"tech"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mini-program"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cloud"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 个性化样式，Object 类型")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"style"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"color"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"red"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 是否已完成，Boolean 类型")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"done"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[t._v("添加完成后可在控制台中查看到刚添加的数据。\n"),a("img",{attrs:{src:"https://main.qcloudimg.com/raw/81d616a1187f173b90d95957355ef912.png",alt:""}})])]),t._v(" "),a("h3",{attrs:{id:"权限控制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#权限控制"}},[t._v("#")]),t._v(" 权限控制")]),t._v(" "),a("p",[t._v("数据库的权限分为客户端和管理端，客户端包括小程序和 web 端，管理端包括云函数端和控制台。客户端读写数据库受权限控制限制，管理端拥有所有读写数据库的权限。云控制台的权限同管理端，拥有所有权限。客户端操作数据库应有严格的安全规则限制。")]),t._v(" "),a("p",[t._v("初期我们对操作数据库开放以下几种权限配置，每个集合可以拥有一种权限配置，权限配置的规则是作用在集合的每个记录上的。出于易用性和安全性的考虑，在客户端创建的每个数据库记录都会带有该记录创建者（即小程序或网站用户）的信息，以 "),a("code",[t._v("_openid")]),t._v(" 字段保存用户的 "),a("code",[t._v("openid")]),t._v(" 在每个相应用户创建的记录中。其中，小程序端_openid 为微信公众平台 openid，网站端则为 cloudBase 生成的用户唯一 ID。因此，权限控制也相应围绕着一个用户是否应该拥有权限操作其他用户创建的数据展开。")]),t._v(" "),a("p",[t._v("以下按照权限级别从宽到紧排列如下：")]),t._v(" "),a("ul",[a("li",[t._v("仅创建者可写，所有人可读：数据只有创建者可写、所有人可读；比如文章。")]),t._v(" "),a("li",[t._v("仅创建者可读写：数据只有创建者可读写，其他用户不可读写；比如用私密相册。")]),t._v(" "),a("li",[t._v("仅管理端可写，所有人可读：该数据只有管理端可写，所有人可读；如商品信息。")]),t._v(" "),a("li",[t._v("仅管理端可读写：该数据只有管理端可读写；如后台用的不暴露的数据。")])]),t._v(" "),a("p",[t._v("管理端始终拥有读写所有数据的权限，客户端始终不能写他人创建的数据，客户端的记录的读写权限其实分为了 “所有人可读，只有创建者可写“、”仅创建者可读写“、”所有人可读，仅管理端可写“、”所有人不可读，仅管理端可读写“。")]),t._v(" "),a("p",[t._v("对一个用户来说，不同模式在客户端和管理端的权限表现如下：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("端")]),t._v(" "),a("th",[t._v("客户端")]),t._v(" "),a("th",[t._v("客户端")]),t._v(" "),a("th",[t._v("客户端")]),t._v(" "),a("th",[t._v("客户端")]),t._v(" "),a("th",[t._v("管理端")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("权限")]),t._v(" "),a("td",[t._v("读自己创建的数据")]),t._v(" "),a("td",[t._v("写自己创建的数据")]),t._v(" "),a("td",[t._v("读他人创建的数据")]),t._v(" "),a("td",[t._v("写他人创建的数据")]),t._v(" "),a("td",[t._v("读写任意数据")])]),t._v(" "),a("tr",[a("td",[t._v("仅创建者可写，所有人可读")]),t._v(" "),a("td",[t._v("√")]),t._v(" "),a("td",[t._v("√")]),t._v(" "),a("td",[t._v("√")]),t._v(" "),a("td",[t._v("×")]),t._v(" "),a("td",[t._v("√")])]),t._v(" "),a("tr",[a("td",[t._v("仅创建者可读写")]),t._v(" "),a("td",[t._v("√")]),t._v(" "),a("td",[t._v("√")]),t._v(" "),a("td",[t._v("×")]),t._v(" "),a("td",[t._v("×")]),t._v(" "),a("td",[t._v("√")])]),t._v(" "),a("tr",[a("td",[t._v("仅管理端可写，所有人可读")]),t._v(" "),a("td",[t._v("√")]),t._v(" "),a("td",[t._v("×")]),t._v(" "),a("td",[t._v("√")]),t._v(" "),a("td",[t._v("×")]),t._v(" "),a("td",[t._v("√")])]),t._v(" "),a("tr",[a("td",[t._v("仅管理端可读写：该数据只有管理端可读写")]),t._v(" "),a("td",[t._v("×")]),t._v(" "),a("td",[t._v("×")]),t._v(" "),a("td",[t._v("×")]),t._v(" "),a("td",[t._v("×")]),t._v(" "),a("td",[t._v("√")])])])])])}),[],!1,null,null,null);s.default=_.exports}}]);