(window.webpackJsonp=window.webpackJsonp||[]).push([[120],{648:function(t,e,a){"use strict";a.r(e);var n=a(14),s=Object(n.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),a("h2",{attrs:{id:"当前文档已迁移到新的文档站点-此内容不再维护"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#当前文档已迁移到新的文档站点-此内容不再维护"}},[t._v("#")]),t._v(" 当前文档已迁移到新的"),a("a",{attrs:{href:"https://docs.cloudbase.net/cli/intro.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("文档站点"),a("OutboundLink")],1),t._v("，此内容不再维护！")])]),t._v(" "),a("h1",{attrs:{id:"函数配置项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#函数配置项"}},[t._v("#")]),t._v(" 函数配置项")]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("⚠️ 注意事项")]),t._v(" "),a("p",[t._v("所有 CloudBase CLI 命令均在配置文件所在目录执行。")])]),t._v(" "),a("p",[t._v("在 CLI 配置文件中，functions 数组可以包含多个函数配置项，函数配置项包含了"),a("code",[t._v("函数名称（name）")]),t._v("，"),a("code",[t._v("函数运行配置（config）")]),t._v("，"),a("code",[t._v("函数调用传入参数（params）")]),t._v("等多项与函数相关的信息，影响着函数操作的行为表现。")]),t._v(" "),a("h2",{attrs:{id:"函数配置项-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#函数配置项-2"}},[t._v("#")]),t._v(" 函数配置项")]),t._v(" "),a("p",[t._v("下面为目前所有支持的配置项")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("配置项")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("是否必填")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("类型")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("name")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("是")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("String")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("云函数名称，即为函数部署到云开后的名称")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("config")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("是")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("CloudFunctionConfig")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("云函数运行时配置")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("params")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("否")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("Object/JSONObject")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("CIL 调用云函数时的函数入参")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("triggers")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("否")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[a("code",[t._v("Array<[CloudFunctionTrigger](#cloudfunctiontrigger)>")])]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("函数处理方法名称，名称格式支持“文件名称.函数名称”形式")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("handler")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("否")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("String")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("函数处理方法名称，名称格式支持“文件名称.函数名称”形式")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("ignore")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("否")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[a("code",[t._v("String/Array<String>")])]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("部署/更新云函数代码时的忽略文件，支持 glob 匹配规则")])])])]),t._v(" "),a("h4",{attrs:{id:"cloudfunctionconfig"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cloudfunctionconfig"}},[t._v("#")]),t._v(" CloudFunctionConfig")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("名称")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("是否必填")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("类型")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("timeout")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("否")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("Number")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("函数超时时间（1 - 60S）")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("envVariables")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("否")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("Object")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("包含环境变量的键值对对象")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("vpc")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("否")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[a("a",{attrs:{href:"#vpc"}},[t._v("VPC")])]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("私有网络配置")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("runtime")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("否")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("String")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("运行时环境配置，可选值： "),a("code",[t._v("Nodejs8.9, Php7, Java8")])])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("installDependency")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("否")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("Boolean")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("是否云端安装依赖，目前仅支持 Node.js")])])])]),t._v(" "),a("p",[a("strong",[t._v("注："),a("code",[t._v("runtime")]),t._v(" 默认为 "),a("code",[t._v("Nodejs8.9")]),t._v("，使用 Node 运行时可不填，使用 Php 和 Java 则必填。")])]),t._v(" "),a("h4",{attrs:{id:"cloudfunctiontrigger"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cloudfunctiontrigger"}},[t._v("#")]),t._v(" CloudFunctionTrigger")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("名称")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("是否必填")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("类型")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("name")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("是")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("String")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("触发器名称")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("type")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("是")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("String")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("触发器类型，可选值：timer")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("config")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("是")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("String")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("触发器配置，在定时触发器下，config 格式为 cron 表达式")])])])]),t._v(" "),a("h4",{attrs:{id:"vpc"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vpc"}},[t._v("#")]),t._v(" VPC")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("名称")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("是否必填")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("类型")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("vpcId")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("是")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("String")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("VPC Id")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("subnetId")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("是")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("String")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("VPC 子网 Id")])])])]),t._v(" "),a("h2",{attrs:{id:"更新函数运行时配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#更新函数运行时配置"}},[t._v("#")]),t._v(" 更新函数运行时配置")]),t._v(" "),a("p",[t._v("创建函数式，Cloudbase CLI 会为函数提供一些默认的配置，所以你不需要添加配置信息也可以直接部署函数。你也可以通过下面的命令修改函数的运行时配置")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 更新 app 函数的配置")]),t._v("\ncloudbase functions:config:update app\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 更新配置文件中所有函数的配置信息")]),t._v("\ncloudbase functions:config:update\n")])])]),a("p",[t._v("目前支持修改的函数配置包含超时时间 "),a("code",[t._v("timeout")]),t._v("、环境变量 "),a("code",[t._v("envVariables")]),t._v("、运行时 "),a("code",[t._v("runtime")]),t._v("，"),a("code",[t._v("vpc")]),t._v("网络以及 "),a("code",[t._v("installDependency")]),t._v(" 等选项。")]),t._v(" "),a("p",[t._v("CloudBase CLI 会从配置文件中读取函数的配置信息并更新，CloudBase CLI 会更新配置文件中存在的函数的所有配置，暂不支持指定更新单个配置选项。")]),t._v(" "),a("h2",{attrs:{id:"配置项参考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置项参考"}},[t._v("#")]),t._v(" 配置项参考")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 关联环境 ID")]),t._v("\n    envId"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dev-xxxx'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 函数配置")]),t._v("\n    functions"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// functions 文件夹下函数文件夹的名称，即函数名")]),t._v("\n            name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'app'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 函数配置")]),t._v("\n            config"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 超时时间，单位：秒 S")]),t._v("\n                timeout"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 环境变量")]),t._v("\n                envVariables"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    key"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'value'")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 私有网络配置，如果不使用私有网络，可不配置")]),t._v("\n                vpc"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// vpc id")]),t._v("\n                    vpcId"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vpc-xxx'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 子网 id")]),t._v("\n                    subnetId"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'subnet-xxx'")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 运行时，目前可选运行包含：Nodejs8.9, Php7, Java8")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 此参数可以省略，默认为 Nodejs8.9")]),t._v("\n                runtime"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Nodejs8.9'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 是否云端安装依赖，仅支持 Node.js 项目")]),t._v("\n                installDependency"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 函数触发器，说明见文档: https://cloud.tencent.com/document/product/876/32314")]),t._v("\n            triggers"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// name: 触发器的名字")]),t._v("\n                    name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'myTrigger'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// type: 触发器类型，目前仅支持 timer （即定时触发器）")]),t._v("\n                    type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'timer'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// config: 触发器配置，在定时触发器下，config 格式为 cron 表达式")]),t._v("\n                    config"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0 0 2 1 * * *'")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 函数处理入口，Node 和 PHP 项目可以省略，默认值为 index.main")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 因 Java 的 handler 配置较为特殊，所以当运行时为 Java 时，handler 不能省略")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如：package.Class::mainHandler")]),t._v("\n            handler"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'index.main'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// functions:invoke 本地触发云函数时的调用参数")]),t._v("\n            params"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 部署/更新云函数时忽略的文件")]),t._v("\n            ignore"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 忽略 markdown 文件")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'*.md'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 忽略 node_modules 文件夹")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'node_modules'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'node_modules/**/*'")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])}),[],!1,null,null,null);e.default=s.exports}}]);