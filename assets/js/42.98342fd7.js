(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{411:function(t,a,e){"use strict";e.r(a);var s=e(2),n=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"操作场景"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#操作场景","aria-hidden":"true"}},[t._v("#")]),t._v(" 操作场景")]),t._v(" "),e("p",[t._v("目前云开发支持在小程序云开发控制台或腾讯云云开发控制台进行数据导入。本文档指导您如何在小程序云开发控制台从文件导入已有的数据。目前仅支持导入 CSV、JSON 格式的文件数据。")]),t._v(" "),e("h2",{attrs:{id:"前提条件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#前提条件","aria-hidden":"true"}},[t._v("#")]),t._v(" 前提条件")]),t._v(" "),e("ul",[e("li",[t._v("当使用小程序云开发控制台进行导出时，需要已下载并安装 "),e("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("微信小程序工具"),e("OutboundLink")],1),t._v("；")]),t._v(" "),e("li",[t._v("当使用腾讯云云开发控制台进行导出时，因目前腾讯云云开发处于内测期间，您需要前往 "),e("a",{attrs:{href:"https://console.cloud.tencent.com/tcb",target:"_blank",rel:"noopener noreferrer"}},[t._v("云开发控制台"),e("OutboundLink")],1),t._v(" 申请开通白名单。")])]),t._v(" "),e("h2",{attrs:{id:"操作步骤"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#操作步骤","aria-hidden":"true"}},[t._v("#")]),t._v(" 操作步骤")]),t._v(" "),e("ol",[e("li",[t._v("进入云开发控制台。")]),t._v(" "),e("li",[t._v("切换到【数据库】标签页，并选择需要导入数据的集合，单击【导入】。")]),t._v(" "),e("li",[t._v("选择要导入文件的格式以及冲突处理模式，单击【导入】，即可开始导入的过程。")])]),t._v(" "),e("div",{staticClass:"tip custom-block"},[e("p",[t._v("目前提供了 Insert、Upsert 两种冲突处理模式。")])]),t._v(" "),e("ul",[e("li",[t._v("Insert 模式会在导入时总是插入新记录。")]),t._v(" "),e("li",[t._v("Upsert 模式会判断有无该条记录，如果有则更新记录，否则就插入一条新记录。")])]),t._v(" "),e("p",[t._v("在小程序云开发控制台导入数据，如下图所示：\n"),e("img",{attrs:{src:"https://main.qcloudimg.com/raw/7c9ab9c165274391848397ec2da55f11.png",alt:""}})]),t._v(" "),e("p",[t._v("在腾讯云云开发控制台导入数据，如下图所示：\n"),e("img",{attrs:{src:"https://main.qcloudimg.com/raw/f3fe9dff1f2e2f0428d8960bbfd49a1b.png",alt:""}})]),t._v(" "),e("p",[t._v("JSON、CSV 文件必须是 UTF-8 的编码格式，且其内容类似 MongoDB 的导出格式，示例代码如下：\nJSON 示例：")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('{\n    "_id": "xxxxxx",\n    "age": 45\n}\n{\n    "_id": "yyyyyy",\n    "age": 21\n}\n')])])]),e("p",[t._v("CSV 示例：")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("_id"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" age"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nxxxxxx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("45")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nyyyyyy"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("21")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("div",{staticClass:"tip custom-block"},[e("ul",[e("li",[t._v("JSON 数据不是数组，而是类似 "),e("a",{attrs:{href:"http://jsonlines.org/examples/",target:"_blank",rel:"noopener noreferrer"}},[t._v("JSON Lines"),e("OutboundLink")],1),t._v("，即各个记录对象之间使用 "),e("code",[t._v("\\n")]),t._v(" 分隔，而非逗号。")]),t._v(" "),e("li",[t._v("JSON 数据每个键值对的键名首尾不能是 "),e("code",[t._v(".")]),t._v("，例如 "),e("code",[t._v('".a"')]),t._v("、"),e("code",[t._v('"abc."')]),t._v("，且不能包含多个连续的 "),e("code",[t._v(".")]),t._v("，例如 "),e("code",[t._v('"a..b"')]),t._v("。")]),t._v(" "),e("li",[t._v("键名不能重复，且不能有歧义，例如 "),e("code",[t._v('{"a": 1, "a": 2}')]),t._v(" 或 "),e("code",[t._v('{"a": {"b": 1}, "a.b": 2}')]),t._v("。")]),t._v(" "),e("li",[t._v("时间格式须为 "),e("code",[t._v("ISODate")]),t._v(" 格式，例如 "),e("code",[t._v('"date": { "$date" : "2018-08-31T17:30:00.882Z" }')]),t._v("。")]),t._v(" "),e("li",[t._v("当使用 Insert 冲突处理模式时，同一文件不能存在重复的 "),e("code",[t._v("_id")]),t._v(" 字段，L 或与数据库已有记录相同的 "),e("code",[t._v("_id")]),t._v(" 字段。")]),t._v(" "),e("li",[t._v("CSV 格式的数据默认以第一行作为导入后的所有键名，余下的每一行则是与首行键名一一对应的键值记录。")])])]),t._v(" "),e("ol",{attrs:{start:"5"}},[e("li",[t._v("导入完成后，您可以在提示信息中看到本次导入记录的情况。")])])])}),[],!1,null,null,null);a.default=n.exports}}]);