(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{585:function(t,a,r){"use strict";r.r(a);var e=r(14),v=Object(e.a)({},(function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h2",{attrs:{id:"操作场景"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#操作场景"}},[t._v("#")]),t._v(" 操作场景")]),t._v(" "),r("p",[t._v("本文档主要指导您如何在小程序云开发控制台（小程序端）和腾讯云云开发控制台（Web端）管理云函数。")]),t._v(" "),r("h2",{attrs:{id:"操作步骤"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#操作步骤"}},[t._v("#")]),t._v(" 操作步骤")]),t._v(" "),r("h3",{attrs:{id:"小程序云开发控制台"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#小程序云开发控制台"}},[t._v("#")]),t._v(" 小程序云开发控制台")]),t._v(" "),r("h4",{attrs:{id:"配置云函数本地目录"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#配置云函数本地目录"}},[t._v("#")]),t._v(" 配置云函数本地目录")]),t._v(" "),r("p",[t._v("在项目根目录中可以使用 "),r("code",[t._v("project.config.json")]),t._v(" 文件，在其中定义 "),r("code",[t._v("cloudfunctionRoot")]),t._v(" 字段，指定本地已存在的目录作为云函数的本地根目录。")]),t._v(" "),r("h4",{attrs:{id:"云函数操作"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#云函数操作"}},[t._v("#")]),t._v(" 云函数操作")]),t._v(" "),r("p",[t._v("在云函数根目录或者云函数目录上，通过鼠标右键，我们可以唤出右键菜单，完成以下操作。")]),t._v(" "),r("ul",[r("li",[t._v("查看当前环境。")]),t._v(" "),r("li",[t._v("切换环境。")]),t._v(" "),r("li",[t._v("新建 "),r("code",[t._v("Node.js")]),t._v(" 云函数。")]),t._v(" "),r("li",[t._v("下载线上环境的云函数列表。")]),t._v(" "),r("li",[t._v("下载线上环境的云函数代码并覆盖本地。")]),t._v(" "),r("li",[t._v("对比本地代码和线上环境的代码。")]),t._v(" "),r("li",[t._v("上传并部署云函数到线上环境。")])]),t._v(" "),r("h4",{attrs:{id:"查看和切换环境"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#查看和切换环境"}},[t._v("#")]),t._v(" 查看和切换环境")]),t._v(" "),r("p",[t._v("在云函数根目录上右键，在右键菜单中，可以查看当前对应的环境，同时可以切换环境，后续所有右键菜单都是在这个环境下进行操作。")]),t._v(" "),r("h4",{attrs:{id:"新建-node-js-云函数"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#新建-node-js-云函数"}},[t._v("#")]),t._v(" 新建 Node.js 云函数")]),t._v(" "),r("p",[t._v("在云函数根目录上右键，在右键菜单中，可以选择创建一个新的 "),r("code",[t._v("Node.js")]),t._v(" 云函数，开发者工具在本地创建出以下目录和文件，同时在线上环境中创建出对应的云函数：")]),t._v(" "),r("ul",[r("li",[t._v("云函数目录：以云函数名字命名的目录，存放该云函数的所有代码")]),t._v(" "),r("li",[r("code",[t._v("index.js")]),t._v("：云函数入口文件，云函数被调用时实际执行的入口函数是 "),r("code",[t._v("index.js")]),t._v(" 中导出的 "),r("code",[t._v("main")]),t._v(" 方法")]),t._v(" "),r("li",[r("code",[t._v("package.json")]),t._v("：npm 包定义文件，其中默认定义了最新 "),r("code",[t._v("wx-server-sdk")]),t._v(" 依赖")])]),t._v(" "),r("p",[t._v("在创建成功后，工具会提示是否为该云函数立即安装本地依赖即 "),r("code",[t._v("wx-server-sdk")]),t._v("，如是，则工具会开启终端执行 "),r("code",[t._v("npm install")]),t._v("。")]),t._v(" "),r("p",[r("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/wxcloud/reference-server-api/",target:"_blank",rel:"noopener noreferrer"}},[t._v("wx-server-sdk"),r("OutboundLink")],1),t._v(" 是基于 "),r("a",{attrs:{href:"https://github.com/TencentCloudBase/tcb-admin-node",target:"_blank",rel:"noopener noreferrer"}},[t._v("tcb-admin-node"),r("OutboundLink")],1),t._v(" 开发的 服务端 "),r("code",[t._v("SDK")]),t._v("，与小程序端的接口使用方式一致，能获得更一体的开发体验。但如果想获得更高级的功能，可使用 "),r("code",[t._v("tcb-admin-node")]),t._v("。")]),t._v(" "),r("h4",{attrs:{id:"下载云函数列表"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#下载云函数列表"}},[t._v("#")]),t._v(" 下载云函数列表")]),t._v(" "),r("p",[t._v("在云函数根目录上右键，在右键菜单中，我们可以将线上环境中的云函数列表同步到本地，开发者工具会根据云函数的名字，在本地中创建出对应的云函数目录。")]),t._v(" "),r("h4",{attrs:{id:"下载云函数"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#下载云函数"}},[t._v("#")]),t._v(" 下载云函数")]),t._v(" "),r("p",[t._v("在一个云函数目录上右键可以在菜单中选择下载该云函数，云函数代码会被下载到指定目录。")]),t._v(" "),r("h4",{attrs:{id:"上传并部署"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#上传并部署"}},[t._v("#")]),t._v(" 上传并部署")]),t._v(" "),r("p",[t._v("在云函数目录上右键，在右键菜单中，我们可以将云函数整体打包上传并部署到线上环境中。")]),t._v(" "),r("h4",{attrs:{id:"更多设置"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#更多设置"}},[t._v("#")]),t._v(" 更多设置")]),t._v(" "),r("p",[t._v("我们通过右键菜单的 “更多设置” 可以进入云函数的沉浸式交互场景，在这个场景里可以完成以上所有的云函数操作，在云目录上按 ctrl 可以进行多选批量操作。\n"),r("img",{attrs:{src:"https://main.qcloudimg.com/raw/c7d692f19980387e5d422411132ec297.png",alt:""}})]),t._v(" "),r("h3",{attrs:{id:"腾讯云云开发控制台"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#腾讯云云开发控制台"}},[t._v("#")]),t._v(" 腾讯云云开发控制台")]),t._v(" "),r("h4",{attrs:{id:"新建云函数"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#新建云函数"}},[t._v("#")]),t._v(" 新建云函数")]),t._v(" "),r("p",[t._v("登录腾讯云 "),r("a",{attrs:{href:"https://console.cloud.tencent.com/tcb",target:"_blank",rel:"noopener noreferrer"}},[t._v("云开发控制台"),r("OutboundLink")],1),t._v("，单击左侧菜单栏【云函数】，进入云函数页面，单击 【新建云函数】，填写函数名并确定即创建并部署成功。\n"),r("img",{attrs:{src:"https://main.qcloudimg.com/raw/6c47aff7e007754f68520b69a84e2bdf.png",alt:""}})]),t._v(" "),r("h4",{attrs:{id:"删除云函数"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#删除云函数"}},[t._v("#")]),t._v(" 删除云函数")]),t._v(" "),r("p",[t._v("在函数列表的操作列，单击【删除】选项及删除该函数。删除云函数不可恢复，并且删除后即不可访问，请谨慎操作。\n若此环境为微信侧创建环境，则无法在腾讯云云开发控制台进行函数的删除。")]),t._v(" "),r("h4",{attrs:{id:"更改云函数超时时间"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#更改云函数超时时间"}},[t._v("#")]),t._v(" 更改云函数超时时间")]),t._v(" "),r("p",[t._v("在函数列表的操作列，选择要操作的云函数，可以更改云函数的超时时间，默认时间为 20s，最大值为 20s，为保证前端体验，可以根据需要调整。")]),t._v(" "),r("h4",{attrs:{id:"添加云函数环境变量"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#添加云函数环境变量"}},[t._v("#")]),t._v(" 添加云函数环境变量")]),t._v(" "),r("p",[t._v("云函数环境变量可以在您的代码中直接读取，如在 Node.js 中使用 process.env 操作。")]),t._v(" "),r("h4",{attrs:{id:"更新函数代码并部署"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#更新函数代码并部署"}},[t._v("#")]),t._v(" 更新函数代码并部署")]),t._v(" "),r("p",[t._v("您可以在控制台网页上编辑入口文件代码，或者在您的 IDE 里书写代码并将相关代码压缩成 zip 包在控制台上传并部署。\n若此环境为微信侧创建环境，则无法在腾讯云云开发控制台进行编辑，只能在 IDE 中进行代码编辑及部署。\n"),r("img",{attrs:{src:"https://main.qcloudimg.com/raw/c568e58303f5ab0c1c4a898d02992f3d.png",alt:""}})])])}),[],!1,null,null,null);a.default=v.exports}}]);